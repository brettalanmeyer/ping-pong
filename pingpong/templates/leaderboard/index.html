{% extends "layout.html" %}

{% block title %}Leaderboard{% endblock %}

{% block body %}

	<div class="container-fluid">

		<div class="leaderboard-container">

			<h1>Leaderboard</h1>

			<ul class="nav nav-tabs">
				{% for item in matchTypes %}
					<li role="presentation" class="{% if matchType == item %}active{% endif %}">
						<a href="/leaderboard/{{ item }}">{{ item.title() }}</a>
					</li>
				{% endfor %}
			</ul>

			<table id="leaderboard" class="leaderboard-table table table-sortable {{ matchType }}">

				<thead>

					<tr>

						<th data-sort="string">
							Player
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int" class="elo">
							ELO
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int">
							Matches
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="float">
							Win %
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int">
							Points For
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int">
							Points Against
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int">
							Wins
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int">
							Losses
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int">
							Point Streak
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

						<th data-sort="int">
							Current Wins
							<div class="sorting-container">
								<span class="glyphicon glyphicon-chevron-up"></span>
								<span class="glyphicon glyphicon-chevron-down"></span>
							</div>
						</th>

					</tr>

				</thead>

				<tbody>

					{% for row in stats.rows %}

						<tr data-time="{{ row.time }}">

							<td data-sort-value="{{ row.playerName }}">
								<a href="/leaderboard/players/{{ row.playerId }}" class="link">{{ row.playerName }}</a>
							</td>
							<td data-sort-value="{{ row.elo }}" class="elo">{{ row.elo }}</td>
							<td data-sort-value="{{ row.matches }}">{{ row.matches }}</td>
							<td data-sort-value="{{ row.percentage }}">{{ "{:.3f}".format(row.percentage) }}</td>
							<td data-sort-value="{{ row.pointsFor }}">{{ "{:,}".format(row.pointsFor) }}</td>
							<td data-sort-value="{{ row.pointsAgainst }}">{{ "{:,}".format(row.pointsAgainst) }}</td>
							<td data-sort-value="{{ row.wins }}">{{ row.wins }}</td>
							<td data-sort-value="{{ row.losses }}">{{ row.losses }}</td>
							<td data-sort-value="{{ row.pointStreak }}">{{ row.pointStreak }}</td>
							{% with value = row.winStreak %}
								{% include 'leaderboard/win-streak.html' %}
							{% endwith %}

						</tr>

					{% endfor %}

				</tbody>

				<tfoot>

					<tr>

						<th>Totals:</th>
						<th class="elo"></th>
						<th>{{ stats.totals["matches"] }}</th>
						<th></th>
						<th>{{ stats.totals["pointsFor"] }}</th>
						<th>{{ stats.totals["pointsAgainst"] }}</th>
						<th>{{ stats.totals["wins"] }}</th>
						<th>{{ stats.totals["losses"] }}</th>
						<td></td>

					</tr>

				</tfoot>

			</table>

		</div>

	</div>

{% endblock %}
